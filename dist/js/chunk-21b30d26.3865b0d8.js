(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21b30d26"],{"14c6":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{attrs:{id:"container"}}),n("div",{staticClass:"info"},[n("p",{attrs:{id:"info"}})])])}];n("d81d"),n("d3b7");function i(){return new Promise((function(t,e){if(window.AMap)t(window.AMap);else{var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="http://webapi.amap.com/maps?v=1.4.15&key=34cb852edd69880129cd7984f1acefaa",n.onerror=e,document.head.appendChild(n)}window.initAMap=function(){t(window.AMap)}}))}var r={data:function(){return{map:null}},created:function(){var t=this;i().then((function(e){console.log("地图加载成功"),t.map=new e.Map("container",{resizeEnable:!0,zoom:11}),e.plugin("AMap.Geolocation",(function(){var n=new e.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonPosition:"RB",buttonOffset:new e.Pixel(10,20),zoomToAccuracy:!0});t.map.addControl(n),n.getCurrentPosition((function(t,e){"complete"==t?(console.log(e.addressComponent.city),sessionStorage.setItem("city",e.addressComponent.city)):console.log(e)}))}))}),(function(t){console.log("地图加载失败",t)}))},mounted:function(){},methods:{}},s=r,c=(n("2c57"),n("2877")),l=Object(c["a"])(s,a,o,!1,null,null,null);e["a"]=l.exports},"19ca":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"share"},[n("div",{staticClass:"header"},[n("van-nav-bar",{attrs:{"left-text":"返回","left-arrow":"",border:""},on:{"click-left":t.back},scopedSlots:t._u([{key:"right",fn:function(){return[n("img",{staticClass:"pushshare",attrs:{src:t.pushshare},on:{click:t.sumbit}})]},proxy:!0}])})],1),n("div",{staticClass:"bodycenter"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{placeholder:"#添加标题#/不超过24个字哦！"},domProps:{value:t.title},on:{blur:function(e){return t.checktitle()},input:function(e){e.target.composing||(t.title=e.target.value)}}}),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textareavalue,expression:"textareavalue"}],attrs:{placeholder:"你的文字里藏着你走过的路"},domProps:{value:t.textareavalue},on:{input:function(e){e.target.composing||(t.textareavalue=e.target.value)}}}),n("div",{staticClass:"updata"},[n("van-uploader",{attrs:{"after-read":t.afterRead,"max-count":1,"upload-text":t.topimgtext,"max-size":5242880},on:{oversize:t.afterRead},scopedSlots:t._u([{key:"preview-cover",fn:function(){return[n("div",{staticClass:"preview-cover van-ellipsis"},[t._v("封面")])]},proxy:!0}]),model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}}),t.showimgbut?n("van-uploader",{attrs:{"after-read":t.afterRead2,"max-count":8,"upload-text":t.imgtext},model:{value:t.fileList2,callback:function(e){t.fileList2=e},expression:"fileList2"}}):t._e()],1),n("van-cell",{attrs:{title:"上传照片","is-link":"","arrow-direction":"up",value:"最多8张"}}),n("van-cell",{attrs:{title:"当前位置",icon:"location-o",value:t.city},on:{click:function(e){return t.getcity()}}}),n("amap"),n("div",{staticClass:"timer"},[t._v(t._s(t.daydata))])],1)])},o=[],i=(n("9a83"),n("f564")),r=(n("a1fd"),n("14c6")),s={components:{Amap:r["a"]},data:function(){return{pushshare:n("6b9c"),fileList:[],fileList2:[],showimgbut:!1,daydata:"",city:"点击获取当前位置",sharetoken:"",imgtext:"照片",topimgtext:"封面",phone:localStorage.getItem("phonename"),username:localStorage.getItem("currenUser"),title:"",textareavalue:""}},created:function(){this.current(),this.sharetoken="share"+Date.now()},mounted:function(){var t=this;setInterval((function(){t.current()}),5e3)},methods:{back:function(){this.$router.go(-1)},current:function(){var t=new Date,e="";return e+=t.getFullYear()+"年",e+=t.getMonth()+1+"月",e+=t.getDate()+"日",e+=t.getHours()+"时",e+=t.getMinutes()+"分",this.daydata=e,e},checktitle:function(){console.log(this.title.length),this.title.length>22&&Object(i["a"])("标题过长")},getcity:function(){this.city=sessionStorage.getItem("city")},afterRead:function(t){var e=this;if(console.log(t),t.file.size>5148576)this.$toast("封面不能大于5M");else{this.showimgbut=!0,console.log(t);var n={phone:this.phone,fileList:t.content,sharetoken:this.sharetoken,topimg:!0};this.axios({method:"POST",url:"/share",data:n}).then((function(t){console.log("result ==> ",t)})).catch((function(t){e.$toast.clear(),console.log("err ==> ",t)}))}},afterRead2:function(t){var e=this;console.log(t);var n={phone:this.phone,fileList:t.content,sharetoken:this.sharetoken};this.axios({method:"POST",url:"/share",data:n}).then((function(t){console.log("result ==> ",t)})).catch((function(t){e.$toast.clear(),console.log("err ==> ",t)}))},sumbit:function(){var t=this,e={phone:this.phone,username:this.username,time:this.daydata,title:this.title,sharetoken:this.sharetoken,text:this.textareavalue,place:this.city,userimg:localStorage.getItem("userimg")};""==this.fileList||""==this.fileList2?this.$toast.fail("请选择分享的照片"):("点击获取当前位置"==this.city&&(e.place="神秘之地"),""==this.title?this.$toast.fail("起个名字吧"):this.axios({method:"POST",url:"/share",data:e}).then((function(e){if(200==e.data.message)t.$toast.sucess(e.data.message);else{t.$toast.fail(e.data.message);var n=2,a=setInterval((function(){n--,n||(clearInterval(a),t.$toast.clear(),t.$router.push({name:"Home"}))}),1e3)}console.log("result ==> ",e)})).catch((function(e){t.$toast.clear(),console.log("err ==> ",e)})))}}},c=s,l=n("2877"),u=Object(l["a"])(c,a,o,!1,null,null,null);e["default"]=u.exports},"1dde":function(t,e,n){var a=n("d039"),o=n("b622"),i=n("2d00"),r=o("species");t.exports=function(t){return i>=51||!a((function(){var e=[],n=e.constructor={};return n[r]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"2c57":function(t,e,n){"use strict";n("e93a")},"65f0":function(t,e,n){var a=n("861d"),o=n("e8b5"),i=n("b622"),r=i("species");t.exports=function(t,e){var n;return o(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)?a(n)&&(n=n[r],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},"6b9c":function(t,e,n){t.exports=n.p+"img/push.0dee6744.svg"},a1fd:function(t,e,n){},ae40:function(t,e,n){var a=n("83ab"),o=n("d039"),i=n("5135"),r=Object.defineProperty,s={},c=function(t){throw t};t.exports=function(t,e){if(i(s,t))return s[t];e||(e={});var n=[][t],l=!!i(e,"ACCESSORS")&&e.ACCESSORS,u=i(e,0)?e[0]:c,f=i(e,1)?e[1]:void 0;return s[t]=!!n&&!o((function(){if(l&&!a)return!0;var t={length:-1};l?r(t,1,{enumerable:!0,get:c}):t[1]=1,n.call(t,u,f)}))}},b727:function(t,e,n){var a=n("0366"),o=n("44ad"),i=n("7b0b"),r=n("50c4"),s=n("65f0"),c=[].push,l=function(t){var e=1==t,n=2==t,l=3==t,u=4==t,f=6==t,d=5==t||f;return function(h,p,v,m){for(var g,b,x=i(h),y=o(x),w=a(p,v,3),k=r(y.length),C=0,A=m||s,S=e?A(h,k):n?A(h,0):void 0;k>C;C++)if((d||C in y)&&(g=y[C],b=w(g,C,x),t))if(e)S[C]=b;else if(b)switch(t){case 3:return!0;case 5:return g;case 6:return C;case 2:c.call(S,g)}else if(u)return!1;return f?-1:l||u?u:S}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},d81d:function(t,e,n){"use strict";var a=n("23e7"),o=n("b727").map,i=n("1dde"),r=n("ae40"),s=i("map"),c=r("map");a({target:"Array",proto:!0,forced:!s||!c},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},e8b5:function(t,e,n){var a=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==a(t)}},e93a:function(t,e,n){}}]);
//# sourceMappingURL=chunk-21b30d26.3865b0d8.js.map