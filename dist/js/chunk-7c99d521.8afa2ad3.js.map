{"version":3,"sources":["webpack:///./src/views/mall/Shopbag.vue?6c63","webpack:///src/views/mall/Shopbag.vue","webpack:///./src/views/mall/Shopbag.vue?b43e","webpack:///./src/views/mall/Shopbag.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","back","_v","_l","goods","index","key","scopedSlots","_u","fn","$event","deletegoods","proxy","singleSelect","model","value","callback","$$v","$set","expression","onlyid","price","goodsplace","title","imgurl","getonlyid","_s","date","changegoods","totalprice","onSubmit","gotomall","gologin","staticRenderFns","inject","data","phonename","localStorage","getItem","checked","selectedGoodsInfo","goodsid","havegoods","page","isLogin","totalpeople","goodslist","created","getgoods","_methods","$router","push","sum","axios","method","url","params","people","length","i","console","log","component"],"mappings":"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","file":"js/chunk-7c99d521.8afa2ad3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shopbag\"},[_c('div',{staticClass:\"header\"},[_c('van-nav-bar',{attrs:{\"title\":\"购物车\",\"left-text\":\"返回\",\"left-arrow\":\"\",\"fixed\":true},on:{\"click-left\":_vm.back}})],1),(_vm.havegoods)?_c('div',{staticClass:\"goods\"},[_c('div',{staticClass:\"shopname\"},[_c('van-icon',{attrs:{\"name\":\"bag-o\",\"color\":\"red\"}}),_c('h3',[_vm._v(\"山河旅行社旗舰店>\")])],1),_c('div',{staticClass:\"goodslist\"},[_vm._l((_vm.goodslist),function(goods,index){return _c('van-swipe-cell',{key:index,scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_c('van-button',{staticClass:\"delete-button\",attrs:{\"square\":\"\",\"text\":\"删除\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.deletegoods()}}})]},proxy:true}],null,true)},[_c('van-checkbox',{staticClass:\"goodscheckbox\",attrs:{\"checked-color\":\"#ee0a24\"},on:{\"click\":function($event){return _vm.singleSelect(goods)}},model:{value:(goods.isChecked),callback:function ($$v) {_vm.$set(goods, \"isChecked\", $$v)},expression:\"goods.isChecked\"}}),_c('van-card',{staticClass:\"goods-card\",attrs:{\"onlyid\":goods.onlyid,\"price\":goods.price,\"desc\":goods.goodsplace,\"title\":goods.title,\"thumb\":goods.imgurl},on:{\"touchmove\":function($event){return _vm.getonlyid(goods.onlyid)}},scopedSlots:_vm._u([{key:\"tags\",fn:function(){return [_c('van-tag',{attrs:{\"plain\":\"\",\"type\":\"danger\"}},[_vm._v(\"日期\"+_vm._s(goods.date))])]},proxy:true},{key:\"footer\",fn:function(){return [_c('van-stepper',{attrs:{\"theme\":\"round\",\"button-size\":\"22\"},on:{\"change\":function($event){return _vm.changegoods(goods)}},model:{value:(goods.people),callback:function ($$v) {_vm.$set(goods, \"people\", $$v)},expression:\"goods.people\"}})]},proxy:true}],null,true)})],1)}),_c('div',{staticClass:\"footer\"},[_c('van-submit-bar',{attrs:{\"price\":_vm.totalprice,\"button-text\":\"提交订单\"},on:{\"submit\":_vm.onSubmit}})],1)],2),_c('div',{staticClass:\"bottom\"},[_vm._v(\"--------我也是个有底线的人--------\")])]):_c('div',{staticClass:\"nogoods\"},[(_vm.isLogin)?_c('div',[_c('van-empty',{attrs:{\"description\":\"什么都没有，先去逛逛吧\"}}),_c('van-button',{staticClass:\"bottom-button\",attrs:{\"round\":\"\",\"type\":\"danger\"},on:{\"click\":_vm.gotomall}},[_vm._v(\"去商城\")])],1):_c('div',{staticClass:\"nologin\"},[_c('van-empty',{attrs:{\"description\":\"还没登录哦，先去登录吧\"}}),_c('van-button',{staticClass:\"bottom-button\",attrs:{\"round\":\"\",\"type\":\"danger\"},on:{\"click\":_vm.gologin}},[_vm._v(\"登录\")])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"shopbag\">\r\n    <div class=\"header\">\r\n      <van-nav-bar\r\n        title=\"购物车\"\r\n        left-text=\"返回\"\r\n        left-arrow\r\n        :fixed=\"true\"\r\n        @click-left=\"back\"\r\n      />\r\n    </div>\r\n    <div class=\"goods\" v-if=\"havegoods\">\r\n      <div class=\"shopname\">\r\n       <van-icon name=\"bag-o\" color=\"red\" />\r\n        <h3>山河旅行社旗舰店></h3>\r\n      </div>\r\n      <div class=\"goodslist\">\r\n        <van-swipe-cell v-for=\"(goods, index) in goodslist\" :key=\"index\">\r\n          \r\n          <van-checkbox\r\n            @click=\"singleSelect(goods)\"\r\n            class=\"goodscheckbox\"\r\n            v-model=\"goods.isChecked\"\r\n            checked-color=\"#ee0a24\"\r\n          ></van-checkbox>\r\n          <van-card\r\n            :onlyid=\"goods.onlyid\"\r\n            :price=\"goods.price\"\r\n            @touchmove=\"getonlyid(goods.onlyid)\"\r\n            :desc=\"goods.goodsplace\"\r\n            :title=\"goods.title\"\r\n            class=\"goods-card\"\r\n            :thumb=\"goods.imgurl\"\r\n          >\r\n          <template #tags>\r\n    <van-tag plain type=\"danger\">日期{{goods.date}}</van-tag>\r\n   \r\n  </template>\r\n            <template #footer>\r\n              <van-stepper\r\n                v-model=\"goods.people\"\r\n                theme=\"round\"\r\n                button-size=\"22\"\r\n                @change=\"changegoods(goods)\"\r\n              />\r\n            </template>\r\n          </van-card>\r\n          <template #right >\r\n            <van-button\r\n              square\r\n              text=\"删除\"\r\n              type=\"danger\"\r\n              class=\"delete-button\"\r\n              @click=\"deletegoods()\"\r\n            />\r\n          </template>\r\n        </van-swipe-cell>\r\n\r\n        <div class=\"footer\">\r\n          <van-submit-bar\r\n            :price=\"totalprice\"\r\n            button-text=\"提交订单\"\r\n            @submit=\"onSubmit\"\r\n          >\r\n          \r\n          </van-submit-bar>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"bottom\">--------我也是个有底线的人--------</div>\r\n    </div>\r\n\r\n    <div class=\"nogoods\" v-else>\r\n      <div v-if=\"isLogin\" >\r\n        <van-empty description=\"什么都没有，先去逛逛吧\"></van-empty>\r\n        <van-button round type=\"danger\" class=\"bottom-button\" @click=\"gotomall\"\r\n          >去商城</van-button\r\n        >\r\n      </div>\r\n      <div v-else class=\"nologin\">\r\n        <van-empty description=\"还没登录哦，先去登录吧\"></van-empty>\r\n        <van-button round type=\"danger\" class=\"bottom-button\" @click=\"gologin\"\r\n          >登录</van-button\r\n        >\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport \"../../assets/less/shopbag.less\";\r\nexport default {\r\n  inject: [\"reload\"],\r\n  data() {\r\n    return {\r\n      phonename: localStorage.getItem(\"phonename\"),\r\n      checked: false,\r\n      onlyid: \"\",\r\n      selectedGoodsInfo:[],\r\n      goodsid: [],\r\n      havegoods: false,\r\n      totalprice: 0,\r\n      page:\"shopbag\",\r\n      isLogin: localStorage.getItem(\"isLogin\"),\r\n      totalpeople: 0,\r\n      goodslist: [],\r\n    };\r\n  },\r\n  created() {\r\n    this.getgoods();\r\n  },\r\n  _methods: {\r\n    back() {\r\n       this.$router.push({ name: \"Mall\" });\r\n    },\r\n    gologin() {\r\n      this.$router.push({ name: \"Login\" });\r\n    },\r\n    gotomall() {\r\n      this.$router.push({ name: \"Mall\" });\r\n    },\r\n\r\n    // 更改个数\r\n    changegoods(goods) {\r\n      this.sum();\r\n      this.axios({\r\n        method: \"GET\",\r\n        url: \"/changegoods\",\r\n        params: {\r\n          phonename: this.phonename,\r\n          onlyid: goods.onlyid,\r\n          people: goods.people,\r\n        },\r\n      });\r\n    },\r\n    //计算总价格\r\n    sum() {\r\n      this.totalprice=0;\r\n\r\n      for(let i=0;i<this.goodslist.length;i++) {\r\n        if(this.goodslist[i].isChecked==true) {\r\n\r\n          this.totalprice+=\r\n            this.goodslist[i].price*this.goodslist[i].people*100;\r\n        }\r\n      }\r\n\r\n    },\r\n\r\n    singleSelect(goods) {\r\n      // 控制购物车只能单选\r\n      if(this.selectedGoodsInfo.length===0){\r\n this.sum();\r\n this.selectedGoodsInfo.price=this.totalprice/100\r\n      }\r\n     else{\r\n       if(goods.isChecked===true){\r\n goods.isChecked=false\r\n        this.$toast(\"一次预定一个产品哦\")\r\n       }\r\n       else{\r\n         //清空选项信息数组\r\n          this.selectedGoodsInfo.length=[]\r\n          this.totalprice=0\r\n       }\r\n      \r\n      \r\n        \r\n      }\r\n      if(goods.isChecked===true) {\r\n        for(let i=0;i<this.goodslist.length;i++) {\r\n          if(this.goodslist[i].onlyid==goods.onlyid) {\r\n            this.selectedGoodsInfo.push(this.goodslist[i]);\r\n\r\n          }\r\n          \r\n        }\r\n\r\n\r\n      }\r\n      console.log(\"====现在选择物品信息数据\", this.selectedGoodsInfo);\r\n\r\n    },\r\n\r\n    onSubmit() {\r\nif(this.selectedGoodsInfo.length!==0){\r\n \r\n   this.$router.push({ name: \"Confirmgoods\",params:{goodsInfo:this.selectedGoodsInfo,page:this.page}});\r\n   \r\n}else{\r\n  \r\n      this.$toast.fail(\"请选择要购买的商品\");\r\n}\r\n     \r\n    },\r\n    getgoods() {\r\n      this.axios({\r\n        method: \"GET\",\r\n        url: \"/getgoods\",\r\n        params: {\r\n          phonename: this.phonename,\r\n        },\r\n      }).then((res) => {\r\n\r\n        this.goodslist=res.data.message;\r\n        this.isChecked=res.data.message.isChecked;\r\n        if(this.goodslist==\"\") {\r\n          this.havegoods=false;\r\n        } else {\r\n          this.havegoods=true;\r\n        }\r\n      });\r\n    },\r\n    deletegoods() {\r\n      this.axios({\r\n        method: \"GET\",\r\n        url: \"/deletegoods\",\r\n        params: {\r\n          phonename: this.phonename,\r\n          onlyid: this.onlyid,\r\n        },\r\n      }).then((res) => {\r\n\r\n        this.reload();\r\n        if(res.data.code==100) {\r\n          this.havegoods=false;\r\n        }\r\n      });\r\n    },\r\n    getonlyid(onlyid) {\r\n      this.onlyid=onlyid;\r\n\r\n    },\r\n  },\r\n  get methods() {\r\n    return this._methods;\r\n  },\r\n  set methods(value) {\r\n    this._methods=value;\r\n  },\r\n};\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Shopbag.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Shopbag.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Shopbag.vue?vue&type=template&id=1f4450e4&\"\nimport script from \"./Shopbag.vue?vue&type=script&lang=js&\"\nexport * from \"./Shopbag.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}