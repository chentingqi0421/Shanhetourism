{"version":3,"sources":["webpack:///./src/views/user/People.vue?fe0b","webpack:///src/views/user/People.vue","webpack:///./src/views/user/People.vue?73f1","webpack:///./src/views/user/People.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","back","Addpeople","_l","people","key","id","name","tel","$event","onEdit","style","height","model","value","callback","$$v","show","expression","editingContact","onSave","onDelete","staticRenderFns","inject","data","phonename","localStorage","getItem","list","onlyid","flag","created","getpeopleinfo","methods","axios","method","url","params","$router","go","k","length","console","log","contactInfo","$toast","fail","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,OAAO,YAAY,KAAK,aAAa,GAAG,OAAQ,GAAMC,GAAG,CAAC,aAAaR,EAAIS,QAAQL,EAAG,mBAAmB,CAACG,MAAM,CAAC,KAAO,OAAOC,GAAG,CAAC,MAAQR,EAAIU,aAAaV,EAAIW,GAAIX,EAAQ,MAAE,SAASY,GAAQ,OAAOR,EAAG,mBAAmB,CAACS,IAAID,EAAOE,GAAGP,MAAM,CAAC,KAAO,OAAO,KAAOK,EAAOG,KAAK,IAAMH,EAAOI,KAAKR,GAAG,CAAC,MAAQ,SAASS,GAAQ,OAAOjB,EAAIkB,OAAON,UAAcR,EAAG,YAAY,CAACe,MAAM,CAAGC,OAAQ,OAASb,MAAM,CAAC,oBAAoB,GAAG,MAAQ,GAAG,SAAW,UAAUc,MAAM,CAACC,MAAOtB,EAAQ,KAAEuB,SAAS,SAAUC,GAAMxB,EAAIyB,KAAKD,GAAKE,WAAW,SAAS,CAACtB,EAAG,mBAAmB,CAACG,MAAM,CAAC,UAAU,GAAG,eAAeP,EAAI2B,gBAAgBnB,GAAG,CAAC,KAAOR,EAAI4B,OAAO,OAAS5B,EAAI6B,aAAa,IAAI,IACl0BC,EAAkB,G,wBCoCtB,G,UAAA,CACEC,OAAQ,CAAC,UACTC,KAFF,WAGI,MAAO,CACLC,UAAWC,aAAaC,QAAQ,aAChCC,KAAM,GACNX,MAAM,EACNY,OAAQ,GACRC,KAAM,GACNX,eAAgB,KAIpBY,QAbF,WAcItC,KAAKuC,iBAEPC,QAAS,CACPD,cADJ,WACA,WACMvC,KAAKyC,MAAM,CACTC,OAAQ,MACRC,IAAK,iBACLC,OAAQ,CACNZ,UAAWhC,KAAKgC,aAE1B,yBACA,2DAGIxB,KAZJ,WAaMR,KAAK6C,QAAQC,IAAI,IAGnBrC,UAhBJ,WAiBMT,KAAKwB,MAAO,EACZxB,KAAKqC,KAAO,OAEd,QApBJ,SAoBA,GAEM,IAAK,IAAIU,EAAI,EAAGA,EAAI/C,KAAKmC,KAAKa,OAAQD,IAEpC,GADAE,QAAQC,IAAIC,EAAYrC,KAAMd,KAAKmC,KAAKY,GAAGjC,MACvCqC,EAAYrC,OAASd,KAAKmC,KAAKY,GAAGjC,KACpC,OAAO,GAKba,OA9BJ,SA8BA,cACuB,OAAb3B,KAAKqC,KAGf,gBAcU,KAAV,sBAbU,KAAV,OACY,OAAZ,MACY,IAAZ,iBACY,OAAZ,CACc,UAAd,eACc,KAAd,OACc,IAAd,SAEA,kBACY,EAAZ,+BACY,EAAZ,YAUA,gBAeU,KAAV,uBAdU,KAAV,OACY,OAAZ,MACY,IAAZ,gBACY,OAAZ,CACc,UAAd,eACc,KAAd,OACc,IAAd,MACc,GAAd,eAEA,kBACY,EAAZ,+BACY,EAAZ,aASIT,SA5EJ,WA4EA,WACuB,OAAb5B,KAAKqC,KACPrC,KAAKoD,OAAOC,KAAK,WAEjBrD,KAAKyC,MAAM,CACTC,OAAQ,MACRC,IAAK,gBACLC,OAAQ,CACNZ,UAAWhC,KAAKgC,UAChBnB,GAAIb,KAAKoC,UAErB,kBACU,EAAV,+BACU,EAAV,aAIInB,OA7FJ,SA6FA,GACMjB,KAAKwB,MAAO,EACZxB,KAAKqC,KAAO,OACZrC,KAAKoC,OAASzB,EAAOE,OCrJoU,I,YCO3VyC,EAAY,eACd,EACAxD,EACA+B,GACA,EACA,KACA,KACA,MAIa,aAAAyB,E","file":"js/chunk-7e3de2c7.619ce149.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"my-address\"},[_c('van-nav-bar',{attrs:{\"title\":\"常用人员\",\"left-text\":\"返回\",\"left-arrow\":\"\",\"fixed\":true},on:{\"click-left\":_vm.back}}),_c('van-contact-card',{attrs:{\"type\":\"add\"},on:{\"click\":_vm.Addpeople}}),_vm._l((_vm.list),function(people){return _c('van-contact-card',{key:people.id,attrs:{\"type\":\"edit\",\"name\":people.name,\"tel\":people.tel},on:{\"click\":function($event){return _vm.onEdit(people)}}})}),_c('van-popup',{style:({ height: '40%' }),attrs:{\"close-on-popstate\":\"\",\"round\":\"\",\"position\":\"bottom\"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('van-contact-edit',{attrs:{\"is-edit\":\"\",\"contact-info\":_vm.editingContact},on:{\"save\":_vm.onSave,\"delete\":_vm.onDelete}})],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"my-address\">\r\n    <van-nav-bar\r\n      title=\"常用人员\"\r\n      left-text=\"返回\"\r\n      left-arrow\r\n      :fixed=\"true\"\r\n      @click-left=\"back\"\r\n    />\r\n    <van-contact-card type=\"add\" @click=\"Addpeople\" />\r\n    <van-contact-card\r\n      v-for=\"people in list\"\r\n      :key=\"people.id\"\r\n      type=\"edit\"\r\n      :name=\"people.name\"\r\n      :tel=\"people.tel\"\r\n      @click=\"onEdit(people)\"\r\n    />\r\n    <!-- 添加人员 -->\r\n    <van-popup\r\n      v-model=\"show\"\r\n      close-on-popstate\r\n      round\r\n      position=\"bottom\"\r\n      :style=\"{ height: '40%' }\"\r\n    >\r\n      <van-contact-edit\r\n        is-edit\r\n        :contact-info=\"editingContact\"\r\n        @save=\"onSave\"\r\n        @delete=\"onDelete\"\r\n      />\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n<script>\r\nimport \"../../assets/less/address.less\";\r\nexport default {\r\n  inject: [\"reload\"],\r\n  data() {\r\n    return {\r\n      phonename: localStorage.getItem(\"phonename\"),\r\n      list: [],\r\n      show: false,\r\n      onlyid: \"\",\r\n      flag: \"\", //用设定弹框状态\r\n      editingContact: {},\r\n    };\r\n  },\r\n\r\n  created() {\r\n    this.getpeopleinfo();\r\n  },\r\n  methods: {\r\n    getpeopleinfo() {\r\n      this.axios({\r\n        method: \"GET\",\r\n        url: \"/getpeopleinfo\",\r\n        params: {\r\n          phonename: this.phonename,\r\n        },\r\n      }).then((res) => {\r\n        this.list.push(...res.data.message);\r\n      });\r\n    },\r\n    back() {\r\n      this.$router.go(-1);\r\n    },\r\n    //新增地址\r\n    Addpeople() {\r\n      this.show = true;\r\n      this.flag = \"add\";\r\n    },\r\n     checked(contactInfo) {\r\n\r\n      for (var k = 0; k < this.list.length; k++) {\r\n        console.log(contactInfo.name, this.list[k].name);\r\n        if (contactInfo.name === this.list[k].name) {\r\n          return true\r\n        }\r\n      }\r\n    },\r\n    \r\n    onSave(contactInfo) {\r\n      if (this.flag == \"add\") {\r\n        \r\n         \r\n            if (!this.checked(contactInfo)) {\r\n              this.axios({\r\n                method: \"GET\",\r\n                url: \"/addpeopleinfo\",\r\n                params: {\r\n                  phonename: this.phonename,\r\n                  name: contactInfo.name,\r\n                  tel: contactInfo.tel,\r\n                },\r\n              }).then((res) => {\r\n                this.$toast.success(res.data.message);\r\n                this.reload();\r\n              });\r\n            } else {\r\n              this.$toast.fail(\"请勿重复添加\");\r\n            }\r\n          \r\n        \r\n      } else {\r\n        \r\n         \r\n            if (!this.checked(contactInfo)) {\r\n              this.axios({\r\n                method: \"GET\",\r\n                url: \"/changepeople\",\r\n                params: {\r\n                  phonename: this.phonename,\r\n                  name: contactInfo.name,\r\n                  tel: contactInfo.tel,\r\n                  id: this.onlyid,\r\n                },\r\n              }).then((res) => {\r\n                this.$toast.success(res.data.message);\r\n                this.reload();\r\n              });\r\n            } else {\r\n              this.$toast.fail(\"已存在该联系人\");\r\n            }\r\n          \r\n        \r\n      }\r\n    },\r\n    onDelete() {\r\n      if (this.flag == \"add\") {\r\n        this.$toast.fail(\"请先选择联系人\");\r\n      } else {\r\n        this.axios({\r\n          method: \"GET\",\r\n          url: \"/deletepeople\",\r\n          params: {\r\n            phonename: this.phonename,\r\n            id: this.onlyid,\r\n          },\r\n        }).then((res) => {\r\n          this.$toast.success(res.data.message);\r\n          this.reload();\r\n        });\r\n      }\r\n    },\r\n    onEdit(people) {\r\n      this.show = true;\r\n      this.flag = \"edit\";\r\n      this.onlyid = people.id;\r\n    },\r\n  },\r\n};\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./People.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./People.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./People.vue?vue&type=template&id=3e3bea63&\"\nimport script from \"./People.vue?vue&type=script&lang=js&\"\nexport * from \"./People.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}