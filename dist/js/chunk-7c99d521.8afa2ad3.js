(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c99d521"],{"020c":function(t,o,e){"use strict";e.r(o);var s=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"shopbag"},[e("div",{staticClass:"header"},[e("van-nav-bar",{attrs:{title:"购物车","left-text":"返回","left-arrow":"",fixed:!0},on:{"click-left":t.back}})],1),t.havegoods?e("div",{staticClass:"goods"},[e("div",{staticClass:"shopname"},[e("van-icon",{attrs:{name:"bag-o",color:"red"}}),e("h3",[t._v("山河旅行社旗舰店>")])],1),e("div",{staticClass:"goodslist"},[t._l(t.goodslist,(function(o,s){return e("van-swipe-cell",{key:s,scopedSlots:t._u([{key:"right",fn:function(){return[e("van-button",{staticClass:"delete-button",attrs:{square:"",text:"删除",type:"danger"},on:{click:function(o){return t.deletegoods()}}})]},proxy:!0}],null,!0)},[e("van-checkbox",{staticClass:"goodscheckbox",attrs:{"checked-color":"#ee0a24"},on:{click:function(e){return t.singleSelect(o)}},model:{value:o.isChecked,callback:function(e){t.$set(o,"isChecked",e)},expression:"goods.isChecked"}}),e("van-card",{staticClass:"goods-card",attrs:{onlyid:o.onlyid,price:o.price,desc:o.goodsplace,title:o.title,thumb:o.imgurl},on:{touchmove:function(e){return t.getonlyid(o.onlyid)}},scopedSlots:t._u([{key:"tags",fn:function(){return[e("van-tag",{attrs:{plain:"",type:"danger"}},[t._v("日期"+t._s(o.date))])]},proxy:!0},{key:"footer",fn:function(){return[e("van-stepper",{attrs:{theme:"round","button-size":"22"},on:{change:function(e){return t.changegoods(o)}},model:{value:o.people,callback:function(e){t.$set(o,"people",e)},expression:"goods.people"}})]},proxy:!0}],null,!0)})],1)})),e("div",{staticClass:"footer"},[e("van-submit-bar",{attrs:{price:t.totalprice,"button-text":"提交订单"},on:{submit:t.onSubmit}})],1)],2),e("div",{staticClass:"bottom"},[t._v("--------我也是个有底线的人--------")])]):e("div",{staticClass:"nogoods"},[t.isLogin?e("div",[e("van-empty",{attrs:{description:"什么都没有，先去逛逛吧"}}),e("van-button",{staticClass:"bottom-button",attrs:{round:"",type:"danger"},on:{click:t.gotomall}},[t._v("去商城")])],1):e("div",{staticClass:"nologin"},[e("van-empty",{attrs:{description:"还没登录哦，先去登录吧"}}),e("van-button",{staticClass:"bottom-button",attrs:{round:"",type:"danger"},on:{click:t.gologin}},[t._v("登录")])],1)])])},n=[],i=(e("75f2"),{inject:["reload"],data:function(){return{phonename:localStorage.getItem("phonename"),checked:!1,onlyid:"",selectedGoodsInfo:[],goodsid:[],havegoods:!1,totalprice:0,page:"shopbag",isLogin:localStorage.getItem("isLogin"),totalpeople:0,goodslist:[]}},created:function(){this.getgoods()},_methods:{back:function(){this.$router.push({name:"Mall"})},gologin:function(){this.$router.push({name:"Login"})},gotomall:function(){this.$router.push({name:"Mall"})},changegoods:function(t){this.sum(),this.axios({method:"GET",url:"/changegoods",params:{phonename:this.phonename,onlyid:t.onlyid,people:t.people}})},sum:function(){this.totalprice=0;for(var t=0;t<this.goodslist.length;t++)1==this.goodslist[t].isChecked&&(this.totalprice+=this.goodslist[t].price*this.goodslist[t].people*100)},singleSelect:function(t){if(0===this.selectedGoodsInfo.length?(this.sum(),this.selectedGoodsInfo.price=this.totalprice/100):!0===t.isChecked?(t.isChecked=!1,this.$toast("一次预定一个产品哦")):(this.selectedGoodsInfo.length=[],this.totalprice=0),!0===t.isChecked)for(var o=0;o<this.goodslist.length;o++)this.goodslist[o].onlyid==t.onlyid&&this.selectedGoodsInfo.push(this.goodslist[o]);console.log("====现在选择物品信息数据",this.selectedGoodsInfo)},onSubmit:function(){0!==this.selectedGoodsInfo.length?this.$router.push({name:"Confirmgoods",params:{goodsInfo:this.selectedGoodsInfo,page:this.page}}):this.$toast.fail("请选择要购买的商品")},getgoods:function(){var t=this;this.axios({method:"GET",url:"/getgoods",params:{phonename:this.phonename}}).then((function(o){t.goodslist=o.data.message,t.isChecked=o.data.message.isChecked,""==t.goodslist?t.havegoods=!1:t.havegoods=!0}))},deletegoods:function(){var t=this;this.axios({method:"GET",url:"/deletegoods",params:{phonename:this.phonename,onlyid:this.onlyid}}).then((function(o){t.reload(),100==o.data.code&&(t.havegoods=!1)}))},getonlyid:function(t){this.onlyid=t}},get methods(){return this._methods},set methods(t){this._methods=t}}),a=i,l=e("2877"),d=Object(l["a"])(a,s,n,!1,null,null,null);o["default"]=d.exports},"75f2":function(t,o,e){}}]);
//# sourceMappingURL=chunk-7c99d521.8afa2ad3.js.map