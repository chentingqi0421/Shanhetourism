(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f1d25036"],{"159b":function(t,e,o){var s=o("da84"),n=o("fdbc"),a=o("17c2"),i=o("9112");for(var r in n){var l=s[r],c=l&&l.prototype;if(c&&c.forEach!==a)try{i(c,"forEach",a)}catch(d){c.forEach=a}}},"17c2":function(t,e,o){"use strict";var s=o("b727").forEach,n=o("a640"),a=o("ae40"),i=n("forEach"),r=a("forEach");t.exports=i&&r?[].forEach:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,o){"use strict";var s=o("23e7"),n=o("17c2");s({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"7a1c":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"myorder"},[o("header",[o("van-nav-bar",{attrs:{title:"我的旅游","left-text":"返回","left-arrow":"",fixed:!0},on:{"click-left":t.back}})],1),t.haveorder?o("div",[o("div",{staticClass:"orderlist"},[o("van-tabs",{attrs:{type:"card"}},t._l(t.ordername,(function(e,s){return o("van-tab",{key:s,attrs:{title:e}},[o("div",{directives:[{name:"show",rawName:"v-show",value:0==s,expression:"index == 0"}],staticClass:"done"},t._l(t.goodslist,(function(e,s){return o("div",{key:s},[o("van-card",{staticClass:"list",attrs:{num:e.people,price:e.payprice,desc:e.place,title:e.title,thumb:e.goodsimg},scopedSlots:t._u([{key:"tags",fn:function(){return[o("van-tag",{attrs:{plain:"",type:"danger"}},[t._v("原价："+t._s(e.price))]),o("div",{staticClass:"status"},[t._v(" "+t._s("true"===e.status?"支付成功":"false"===e.status?"支付失败":"done"===e.status?"完成订单":e.status)+" ")])]},proxy:!0},{key:"footer",fn:function(){return[o("van-button",{directives:[{name:"show",rawName:"v-show",value:"true"===e.status,expression:"goods.status === 'true'"}],attrs:{size:"mini"},on:{click:function(o){return t.done(e)}}},[t._v("确定订单")]),o("van-button",{attrs:{size:"mini"},on:{click:function(o){return t.deleorder(e)}}},[t._v("删除订单")])]},proxy:!0}],null,!0)})],1)})),0),o("div",{directives:[{name:"show",rawName:"v-show",value:1==s,expression:"index == 1"}],staticClass:"done"},[t.donegoods?o("div",t._l(t.donelist,(function(e,s){return o("div",{key:s},[o("van-card",{staticClass:"list",attrs:{num:e.people,price:e.payprice,desc:e.place,title:e.title,thumb:e.goodsimg},scopedSlots:t._u([{key:"tags",fn:function(){return[o("van-tag",{attrs:{plain:"",type:"danger"}},[t._v("原价："+t._s(e.price))]),o("div",{staticClass:"status"},[t._v(" "+t._s("true"===e.status?"支付成功":"false"===e.status?"支付失败":"done"===e.status?"完成订单":e.status)+" ")])]},proxy:!0},{key:"footer",fn:function(){return[o("van-button",{directives:[{name:"show",rawName:"v-show",value:null==e.comment,expression:"goods.comment==null"}],attrs:{size:"mini"},on:{click:function(o){return t.commt(e)}}},[t._v("评价")]),o("van-popup",{style:{height:"100%"},attrs:{position:"bottom",closeable:"","close-icon-position":"top-left"},model:{value:t.showcommt,callback:function(e){t.showcommt=e},expression:"showcommt"}},[o("div",{staticClass:"goodsinof"},[o("van-card",{staticClass:"list",attrs:{num:t.commentgoods.people,price:t.commentgoods.payprice,desc:t.commentgoods.place,title:t.commentgoods.title,thumb:t.commentgoods.goodsimg}})],1),o("van-cell",{staticClass:"commentcell",attrs:{title:"评价打分"}},[o("div",{staticClass:"rate"},[o("van-rate",{attrs:{icon:"like","void-icon":"like-o"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)]),o("div",{staticClass:"commttext"},[o("van-field",{attrs:{rows:"4",autosize:"",label:"评价",type:"textarea",maxlength:"150",placeholder:"请输入评价","show-word-limit":""},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1),o("van-cell",{attrs:{title:"上传照片","is-link":"","arrow-direction":"down",value:"最多4张"}}),o("div",{staticClass:"upload"},[o("van-uploader",{attrs:{"after-read":t.afterRead,"max-count":4,"upload-text":"宝贝图片"},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}})],1),o("div",{staticClass:"submit"},[o("van-submit-bar",{attrs:{"button-text":"提交评论"},on:{submit:t.onSubmit}})],1)],1),o("van-button",{attrs:{size:"mini"},on:{click:function(o){return t.deleorder(e)}}},[t._v("删除订单")])]},proxy:!0}],null,!0)})],1)})),0):o("div",[o("van-empty",{attrs:{description:"什么都没有，先去逛逛吧"}}),o("van-button",{staticClass:"bottom-button",attrs:{round:"",type:"danger"},on:{click:t.gotomall}},[t._v("去商城")])],1)]),o("div",{directives:[{name:"show",rawName:"v-show",value:2==s,expression:"index == 2"}],staticClass:"done"},[t.failgoods?o("div",t._l(t.faillist,(function(e,s){return o("div",{key:s},[o("van-card",{staticClass:"list",attrs:{num:e.people,price:e.payprice,desc:e.place,title:e.title,thumb:e.goodsimg},scopedSlots:t._u([{key:"tags",fn:function(){return[o("van-tag",{attrs:{plain:"",type:"danger"}},[t._v("原价："+t._s(e.price))]),o("div",{staticClass:"status"},[t._v(" "+t._s("true"===e.status?"支付成功":"false"===e.status?"支付失败":"done"===e.status?"完成订单":e.status)+" ")])]},proxy:!0},{key:"footer",fn:function(){return[o("van-button",{attrs:{size:"mini"},on:{click:function(o){return t.deleorder(e)}}},[t._v("删除订单")])]},proxy:!0}],null,!0)})],1)})),0):o("div",[o("van-empty",{attrs:{description:"什么都没有，先去逛逛吧"}}),o("van-button",{staticClass:"bottom-button",attrs:{round:"",type:"danger"},on:{click:t.gotomall}},[t._v("去商城")])],1)])])})),1)],1)]):o("div",{staticClass:"nogoods"},[t.isLogin?o("div",[o("van-empty",{attrs:{description:"什么都没有，先去逛逛吧"}}),o("van-button",{staticClass:"bottom-button",attrs:{round:"",type:"danger"},on:{click:t.gotomall}},[t._v("去商城")])],1):o("div",{staticClass:"nologin"},[o("van-empty",{attrs:{description:"还没登录哦，先去登录吧"}}),o("van-button",{staticClass:"bottom-button",attrs:{round:"",type:"danger"},on:{click:t.gologin}},[t._v("登录")])],1)])])},n=[],a=(o("4160"),o("159b"),o("2909")),i=(o("8821"),{inject:["reload"],data:function(){return{phonename:localStorage.getItem("phonename"),ordername:["全部订单","已完成","已失效"],goodslist:[],donelist:[],faillist:[],haveorder:!1,userimg:localStorage.getItem("userimg"),value:0,message:"",fileList:[],commentgoods:{},nowtime:"",donegoods:!0,failgoods:!0,showcommt:!1,commented:!1,isLogin:localStorage.getItem("isLogin"),username:localStorage.getItem("currenUser")}},created:function(){this.getorderform(),"null"===this.userimg&&(this.userimg="http://119.29.36.88:2020/img/top.jpeg")},methods:{back:function(){this.$router.push({name:"My"})},gologin:function(){this.$router.push({name:"Login"})},gotomall:function(){this.$router.push({name:"Mall"})},current:function(){var t=new Date,e="";return e+=t.getFullYear()+"年",e+=t.getMonth()+1+"月",e+=t.getDate()+"日",e+=t.getHours()+"时",e+=t.getMinutes()+"分",this.nowtime=e,e},commt:function(t){this.showcommt=!0,this.commentgoods=t,console.log(this.commentgoods)},done:function(t){var e=this;this.axios({method:"GET",url:"/doneorder",params:{onlyid:t.onlyid,phonename:t.tel,orderid:t.orderid}}).then((function(t){console.log(t),e.reload()}))},onSubmit:function(){var t=this;this.current();var e={phone:this.phonename,onlyid:this.commentgoods.onlyid,orderid:this.commentgoods.orderid,time:this.nowtime,value:this.value,text:this.message,goods:this.commentgoods.title};0==this.value?this.$notify("点亮爱心哦"):""==this.message?this.$notify("评论不能为空"):this.axios({method:"POST",url:"/commentgoods",data:e}).then((function(o){t.$toast.success(o.data.message),t.showcommt=!1,e={},t.reload()})).catch((function(t){console.log("err ==> ",t)}))},afterRead:function(t){var e=this;if(console.log(t),t.file.size>5148576)this.$toast("评论照片不能大于5M");else{console.log(t);var o={phone:this.phonename,fileList:t.content,username:this.username,onlyid:this.commentgoods.onlyid,userimg:this.userimg,orderid:this.commentgoods.orderid,img:!0};this.axios({method:"POST",url:"/commentgoods",data:o}).then((function(t){console.log("result ==> ",t)})).catch((function(t){e.$toast.clear(),console.log("err ==> ",t)}))}},deleorder:function(t){var e=this;this.axios({method:"GET",url:"/deleorder",params:{phonename:t.tel,orderid:t.orderid}}).then((function(t){e.reload(),console.log(t)}))},getorderform:function(){var t=this;this.axios({method:"GET",url:"/orderform",params:{phonename:this.phonename}}).then((function(e){var o;console.log("订单信息",e),(o=t.goodslist).push.apply(o,Object(a["a"])(e.data.list)),e.data.list.forEach((function(e){"done"==e.status&&(t.donelist.push(e),console.log(e.comment),null==e.comment?t.commented=!0:t.commented=!1)})),0==t.donelist.length&&(t.donegoods=!1),console.log("完成",t.donelist),e.data.list.forEach((function(e){"false"==e.status&&t.faillist.push(e)})),0==t.faillist.length&&(t.failgoods=!1),console.log("失败",t.faillist),""==e.data.list?t.haveorder=!1:t.haveorder=!0}))}}}),r=i,l=o("2877"),c=Object(l["a"])(r,s,n,!1,null,null,null);e["default"]=c.exports},8821:function(t,e,o){},a640:function(t,e,o){"use strict";var s=o("d039");t.exports=function(t,e){var o=[][t];return!!o&&s((function(){o.call(null,e||function(){throw 1},1)}))}}}]);
//# sourceMappingURL=chunk-f1d25036.a2760019.js.map